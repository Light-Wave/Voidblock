[
  {
    "type": "effect_on_condition",
    "id": "EOC_award_material_tokens",
    "//": "If you got home via an exit portal, award material tokens based on raid length.",
    "//1": "Modified for Voidblock to also award exp",
    "condition": { "math": [ "gettokens == 1" ] },
    "effect": [
      { "math": [ "gettokens = 0" ] },
      { "math": [ "owed_material_tokens = lengthofthisraid * 75 + 50" ] },
      {
        "u_message": "You've returned home safely using a designated exit point.  You have earned <global_val:owed_material_tokens> material tokens for your success.",
        "popup": true
      },
      {
        "u_spawn_item": "warptoken_material",
        "count": { "global_val": "var", "var_name": "owed_material_tokens", "default": 50 }
      },
      { "math": [ "u_val('exp') += owed_material_tokens" ] }
    ]
  }
]
